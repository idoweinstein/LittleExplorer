{% extends 'base.html' %}
{% block content %}
<style>
    /* TODO: move to base.css after merge with Shir's code */
    .grade.deactivated {
        -webkit-filter: grayscale(100%);
        filter: grayscale(100%);
        font-size: 2em;
    }

    .grade.pending {
        -webkit-filter: grayscale(50%);
        filter: grayscale(50%);
        font-size: 2em;
    }

    .grade.chosen {
        -webkit-filter: grayscale(0%);
        filter: grayscale(0%);
        font-size: 2em;
    }
</style>
<script>
    window.onload = () => {
        for (const element of document.getElementsByName('grade')) {
            debugger;
            const value = +(element.getAttribute('value'));
            for (let i = 5; i >= 1; --i) {
                // Iterating backwards since page is rtl but the bottles are ltr
                const subelement = document.createElement('span');
                subelement.innerHTML = '';
                subelement.classList.add('grade');
                subelement.classList.add(i <= value ? 'chosen' : 'deactivated');
                element.appendChild(subelement);
            }
            element.setAttribute("title", "专: " + value);
        }
    }
</script>
<body>
    <link rel="stylesheet" href="..\static\kindergarten.css">
    <h3>{{ kindergarten.name }}</h3>

    <div class="description">
        {% if kindergarten_info.description %}
        <h4>
            <br><span style="white-space: pre-line">{{ kindergarten_info.description }}</span>
        </h4>
        {% endif %}

    </div>
    <div class= "details">
        <div class="contact_details">
            <h5>
                转转: {{ kindergarten.address }}, {{ kindergarten.region }}
            </h5>
            {% if kindergarten_info.phone or kindergarten_info.mail %}
            <h5>注 爪专转 拽砖专:
                {% if kindergarten_info.phone %}
                <br>驻: {{ kindergarten_info.phone }}
                {% endif %}
                {% if kindergarten_info.mail %}
                <br>: {{ kindergarten_info.mail }}
                {% endif %}
            </h5>
            {% endif %}
            <h5>砖注转 驻转 砖 :
                <br>砖注转 驻转: {{ kindergarten.open_time|date:'H:i' }}
                <br>砖注转 住专: {{ kindergarten.close_time|date:'H:i' }}
            </h5>
        </div>
        <div class="kindergarten_details">
            <h5>   砖     {{ kindergarten.get_min_age_display}} </h5>
            <h5> 拽住 砖     {{ kindergarten.get_max_age_display}} </h5>
            <h5>   砖转  拽住转   转  转专 {{ kindergarten.capacity }} </h5>
            <h5> ,  砖砖 住 砖  {{ kindergarten.display_ratio_children_teachers }}  转 拽专 砖  ! </h5>
            <h5>{% if kindergarten.has_parking == 1 %}
                转砖转 , 拽专转  砖 砖  转 专转 专 住祝 砖 
            {% else %}
                转砖转 , 砖 注转    住专转 拽专转 
            {% endif %}
            </h5>
        </div>
    </div>

        {% if user.is_authenticated %}
        <br><button onclick="location.href = '/comment/{{ kindergarten.kindergarten_id }}'">住驻转 转</button>
        {% else %}
        <br>注  专砖 转专? 专砖 转 住祝 转转 注 !
        {% endif %}
    <p>
        {% if comments_with_parent %}
        <h6>转转 砖 专 注 :  </h6>
        <h6>
            {% for comment in comments_with_parent %}
            <div name="grade" class="grade" value="{{ comment.grade }}">
            </div>
            <div class="name">
            {{ comment.parent.get_full_name }}
            </div>
            <div class="comment">
                {{ comment.comment }}
            </div>
            <div class="date">
                {{ comment.date }}
            </div>
            {% endfor %}
        </h6>
        {% endif %}
    </p>


</body>
{% endblock content%}

